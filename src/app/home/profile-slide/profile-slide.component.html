<section [ngClass]="{'slide-in': slideIn}">
    <div class="profile-header">
        <div class="profile-header-content">
            <i class="far fa-arrow-alt-circle-left" (click)="slideOut()"></i>
            <p>Profile</p>
        </div>
    </div>
    <div class="profile-body">
        <div class="user-photo-section">
            <div class="user-overlay">
            </div>
            <input #profPic
                   accept="image/jpeg, image/png"
                   class="upload-profile-photo"
                   type="file"
                   (change)="processImageFile(profPic)">
            <img #profileImage
                 [ngClass]="{'resize-img':profileImageResize }"
                 [src]="imageSource$ | async"
                 id="profile_pic"
                 alt="{{(imageSource$ | async) === null ? '' : 'profile image'}}">
            <div *ngIf="!(imageSource$ | async)" class="overlay-content">
                <p>Profile picture</p>
                <i class="fas fa-images"></i>
            </div>
            <i class="fas fa-user-circle"></i>
        </div>
        <div class="user-input-cols">
            <form [formGroup]="nameForm" (ngSubmit)="onSubmitUserName()">
                <div *ngIf="!editUserNameClicked" class="field-overlay"></div>
                <small class="description-label">Name</small>
                <mat-form-field floatLabel="never" class="md-no-float">
                    <mat-label>Your Name</mat-label>
                    <input #userInput id="user_name" matInput formControlName="user_name" type="text" tabindex="-1">
                    <small [class.hide-input-validation]="hideError">
                        Maximum 35 chars allowed
                    </small>
                    <small *ngIf="
                    hideUsernameCheck &&
                    presentUsername === (userNameTracker$ | async) &&
                    presentUsername.length !== 0">
                        Make sure to use a different username!
                    </small>
                    <small [class.show-update-message]="showUpdatedName">
                        Updated!
                    </small>
                </mat-form-field>
                <button type="submit" [disabled]="
                presentUsername === (userNameTracker$ | async) ||
                (userNameTracker$| async).length < 1 ||
                (userNameTracker$ | async)=== undefined">
                    <i *ngIf="editUserNameClicked" class="fas fa-check-circle"></i>
                </button>
                <i *ngIf="!editUserNameClicked" (click)=activateUserInput() class="fas fa-user-edit"></i>
            </form>
            <form [formGroup]="statusForm" (ngSubmit)="onSubmitStatus()">
                <div *ngIf="!editStatusClicked" class="field-overlay"></div>
                <mat-form-field floatLabel="never">
                    <small class="description-label">Status</small>
                    <mat-label>Your status</mat-label>
                    <input #statusInput id="status" matInput formControlName="status" type="text" tabindex="-1">
                    <small *ngIf="
                    hideStatusCheck &&
                    presentStatus === (statusTracker$ | async) &&
                    presentStatus.length !== 0">
                        Make sure to use a different status!
                    </small>
                    <small [class.show-update-message]="showUpdatedStatus">
                        Updated!
                    </small>
                </mat-form-field>
                <button type="submit" [disabled]="
                presentStatus === (statusTracker$ | async) ||
                (statusTracker$| async).length < 1 ||
                (statusTracker$ | async)=== undefined">
                    <i *ngIf="editStatusClicked" class="fas fa-check-circle"></i>
                </button>
                <i *ngIf="!editStatusClicked" (click)=activateStatusInput() class="fas fa-user-edit"></i>
            </form>
            <p (click)=showForgotPassword() class="forgotten-password">Forgot password?</p>
            <div [ngClass]="{'slide-in-forgotten':bringInForgottenPass}" class="forgot-password-section">
                <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmitForgottenPass()">
                    <mat-form-field floatLabel="never">
                        <mat-label>Your email address</mat-label>
                        <input  #forgotPass matInput formControlName="forgottenPassword" type="email" tabindex="-1">
                        <button [disabled]="forgottenPassword.value === ''|| forgottenPassword.invalid" type="submit">
                            <i class="fas fa-check-circle"></i>
                        </button>
                        <small [class.hide-input-validation]="forgottenPassword.valid">
                            Please make sure to type in a valid email address!
                        </small>
                        <small class="forgot-pass-confirmation" [class.show-update-message]="showEmailSent">Email sent!</small>
                    </mat-form-field>
                </form>
            </div>
        </div>
    </div>
</section>
